<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Najran Health Cluster Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { width: 100%; height: 100%; overflow: hidden; background: #fff; }
        #map { width: 100%; height: 100%; }
        .leaflet-control-attribution { display: none !important; }

        /* Zone label tooltip */
        .zone-label {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-weight: 700;
            font-size: 12px;
            color: #1a1a1a;
            background: rgba(255,255,255,0.92);
            border: 1px solid rgba(0,0,0,0.12);
            border-radius: 5px;
            padding: 3px 8px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.12);
            white-space: nowrap;
        }

        /* PHC dot marker */
        .phc-dot {
            border-radius: 50%;
            border: 1.5px solid #fff;
            box-shadow: 0 1px 3px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
<div id="map"></div>
<script>
(function () {
    'use strict';

    /* ============================================================
       ZONE POLYGON COORDINATES
       ============================================================ */
    const zones = {
        SGH: [
            [16.949748,46.999512],[17.283773,46.749573],[17.236560,46.381531],[17.416166,46.373291],[17.953905,45.904999],[18.110608,45.821228],[18.329757,45.601501],[18.469187,45.561333],[18.513144,45.541420],[18.914724,46.347198],[19.080285,46.540833],[19.316973,46.537399],[19.333168,47.528229],[19.334438,51.998291],[19.002361,52.003784],[18.790599,50.781555],[18.618897,49.118500],[18.167372,48.183975],[17.450198,47.598267],[17.117127,47.469177],[16.956942,47.180786]
        ],
        KGH: [
            [17.430902,44.337044],[17.502296,44.418755],[17.523251,44.426994],[17.532418,44.415665],[17.541257,44.417038],[17.540602,44.393349],[17.556642,44.390259],[17.561552,44.397469],[17.554678,44.450340],[17.554024,44.458237],[17.567444,44.456177],[17.578245,44.447594],[17.584137,44.435921],[17.585118,44.429398],[17.591664,44.426308],[17.599846,44.428024],[17.618826,44.458923],[17.634205,44.449654],[17.647619,44.470940],[17.661033,44.474716],[17.715003,44.442444],[17.790208,44.441757],[17.807533,44.470596],[17.880083,44.478836],[17.835639,44.545784],[17.832698,44.555054],[17.919282,44.573593],[17.933001,44.567413],[17.976767,44.576340],[17.957172,44.642258],[17.955212,44.662170],[17.965663,44.696503],[17.953253,44.745941],[17.918627,44.818726],[17.956517,44.853058],[17.995706,44.959488],[18.044016,45.045319],[18.098846,45.343323],[18.136697,45.354309],[18.158883,45.354309],[18.252811,45.407867],[18.327136,45.418854],[18.342779,45.446320],[18.363634,45.449066],[18.506947,45.530090],[18.513631,45.541248],[18.468618,45.561247],[18.329593,45.601158],[18.110552,45.821207],[17.953253,45.904655],[17.415999,46.373034],[17.236561,46.381359],[17.233249,46.365738],[17.252267,46.086960],[17.333909,45.399971],[17.433360,45.216637],[17.435157,44.888420],[17.434343,44.649725],[17.405516,44.566641],[17.433321,44.467077],[17.433360,44.365196]
        ],
        NNGH: [
            [17.430903,44.336700],[17.418455,44.227867],[17.413869,44.209328],[17.414852,44.190102],[17.464312,44.176369],[17.477411,44.174652],[17.484288,44.179459],[17.484616,44.187698],[17.486253,44.194221],[17.481996,44.208984],[17.512448,44.205208],[17.524890,44.224777],[17.534711,44.238510],[17.541259,44.246063],[17.545514,44.260826],[17.549115,44.261169],[17.552389,44.271812],[17.550425,44.287262],[17.568755,44.286232],[17.580538,44.262199],[17.591010,44.257736],[17.694399,44.223404],[17.704211,44.224091],[17.738222,44.241257],[17.770921,44.252930],[17.782691,44.254303],[17.804266,44.268723],[17.812765,44.292755],[17.823225,44.306488],[17.833684,44.312668],[17.859175,44.316101],[17.878781,44.364853],[17.908186,44.377899],[17.917333,44.390945],[17.900345,44.406052],[17.890543,44.424591],[17.880741,44.478149],[17.809496,44.471283],[17.791190,44.443130],[17.719256,44.441757],[17.663650,44.474716],[17.649255,44.472656],[17.635514,44.451370],[17.619153,44.458923],[17.599519,44.429398],[17.591010,44.427338],[17.585119,44.431458],[17.581191,44.444504],[17.567445,44.458237],[17.556315,44.458237],[17.554053,44.458199],[17.555643,44.442956],[17.561553,44.398499],[17.556315,44.391632],[17.540603,44.394379],[17.541912,44.417725],[17.532746,44.416351],[17.524234,44.427338],[17.504589,44.420471],[17.502303,44.418744],[17.502296,44.418712],[17.476839,44.389462],[17.472024,44.384079]
        ],
        WNH: [
            [17.414201,44.189758],[17.408304,44.138260],[17.383405,44.132767],[17.367022,44.112854],[17.366366,44.099808],[17.405028,44.067535],[17.403718,44.049683],[17.391924,44.023590],[17.400442,44.011230],[17.330974,43.967972],[17.339495,43.904114],[17.337528,43.832016],[17.353914,43.807297],[17.374230,43.788071],[17.370298,43.720093],[17.386026,43.711166],[17.401752,43.694000],[17.416822,43.694687],[17.431890,43.685760],[17.430580,43.702240],[17.438441,43.706360],[17.448268,43.719406],[17.467264,43.714600],[17.467919,43.744812],[17.473813,43.788757],[17.513107,43.860855],[17.525549,43.936386],[17.553702,44.038010],[17.556321,44.095688],[17.526858,44.103928],[17.525549,44.116974],[17.533406,44.165039],[17.531442,44.180832],[17.526858,44.184952],[17.522275,44.182892],[17.522275,44.195251],[17.515072,44.187698],[17.510488,44.189072],[17.511143,44.206238],[17.482328,44.209671],[17.484948,44.195938],[17.484293,44.180145],[17.477088,44.174652]
        ],
        MCH: [
            [17.550588,44.243660],[17.549279,44.255333],[17.548461,44.260826],[17.551898,44.271641],[17.550916,44.286747],[17.568755,44.285889],[17.581029,44.261169],[17.590520,44.257393],[17.589211,44.242630],[17.570065,44.232159],[17.573829,44.223061],[17.577265,44.214134],[17.567282,44.204521],[17.550752,44.218769],[17.550097,44.221687],[17.550425,44.224262],[17.560081,44.228554],[17.557463,44.234905],[17.554189,44.241943]
        ],
        KKH: [
            [17.512778,44.205208],[17.511796,44.192505],[17.510813,44.187698],[17.515070,44.186668],[17.521291,44.194908],[17.520308,44.187355],[17.521945,44.182892],[17.526202,44.183922],[17.530785,44.178429],[17.533404,44.164352],[17.524892,44.112854],[17.525547,44.102554],[17.556974,44.094315],[17.552391,44.038010],[17.524893,43.935699],[17.511797,43.860168],[17.473812,43.788757],[17.465953,43.744812],[17.467263,43.713226],[17.484619,43.708763],[17.485929,43.702583],[17.487566,43.692970],[17.496407,43.690567],[17.505903,43.692970],[17.527185,43.651428],[17.559921,43.634605],[17.570068,43.647308],[17.576941,43.651085],[17.585451,43.651772],[17.603450,43.649025],[17.620140,43.646622],[17.630283,43.648682],[17.630283,43.654518],[17.626684,43.661385],[17.615231,43.666534],[17.582832,43.675117],[17.531441,43.706360],[17.517363,43.737259],[17.517690,43.743782],[17.519327,43.763351],[17.516708,43.785667],[17.534060,43.789444],[17.540280,43.807983],[17.553047,43.827553],[17.575632,43.845062],[17.583487,43.852272],[17.583487,43.866692],[17.595269,43.878708],[17.601814,43.880081],[17.616867,43.910980],[17.645007,43.937073],[17.656457,43.964539],[17.675432,43.994751],[17.695385,44.007111],[17.697674,44.011230],[17.705851,44.015007],[17.715336,44.028397],[17.722531,44.040756],[17.735939,44.051399],[17.743133,44.082642],[17.745749,44.103928],[17.749346,44.114227],[17.748365,44.131050],[17.736920,44.146500],[17.724166,44.158859],[17.721550,44.170189],[17.711084,44.179459],[17.706832,44.181862],[17.694404,44.222717],[17.591669,44.257736],[17.589051,44.242973],[17.571377,44.233017],[17.577268,44.214821],[17.567122,44.205208],[17.550755,44.218941],[17.550755,44.223747],[17.560248,44.227867],[17.555011,44.242630],[17.550428,44.244347],[17.549773,44.259453],[17.545845,44.261169],[17.541589,44.246063],[17.533732,44.236794],[17.517035,44.212418]
        ],
        TGH: [
            [17.908019,43.918362],[17.900995,43.944454],[17.900015,43.957500],[17.906386,43.976727],[17.907202,43.991489],[17.887906,44.026337],[17.880064,44.039383],[17.894440,44.069595],[17.896400,44.092255],[17.897707,44.158173],[17.897054,44.179459],[17.865033,44.211044],[17.858497,44.226151],[17.861765,44.270096],[17.860458,44.305115],[17.858497,44.316101],[17.879410,44.364166],[17.908815,44.377899],[17.916656,44.389572],[17.898361,44.405365],[17.887906,44.424591],[17.880164,44.478579],[17.835885,44.545698],[17.832943,44.554882],[17.919279,44.573572],[17.932988,44.567392],[17.976813,44.576254],[17.957184,44.642268],[17.955219,44.662170],[17.965791,44.696546],[17.953581,44.746284],[17.918737,44.818726],[17.956606,44.852886],[17.996037,44.959574],[18.044277,45.045319],[18.098876,45.343312],[18.136737,45.354266],[18.158922,45.354245],[18.252951,45.407782],[18.327192,45.418768],[18.342825,45.446298],[18.363649,45.449023],[18.506796,45.529575],[18.492308,45.486832],[18.455186,45.380402],[18.440082,45.375981],[18.439838,45.375595],[18.437599,45.374908],[18.438413,45.370789],[18.437599,45.367870],[18.438413,45.362892],[18.438087,45.349846],[18.438576,45.337658],[18.438902,45.324612],[18.439553,45.311952],[18.437965,45.304914],[18.434668,45.290451],[18.432388,45.281353],[18.431085,45.277405],[18.433039,45.275173],[18.434342,45.273027],[18.449487,45.254745],[18.459501,45.241742],[18.459582,45.237923],[18.458768,45.233974],[18.457954,45.229511],[18.455511,45.227795],[18.452743,45.224876],[18.446393,45.219555],[18.433324,45.206337],[18.426850,45.201359],[18.410727,45.186596],[18.405189,45.180931],[18.398836,45.175095],[18.396393,45.172863],[18.395090,45.166512],[18.393950,45.158958],[18.390692,45.140591],[18.388737,45.129433],[18.386457,45.114326],[18.383199,45.096989],[18.380755,45.083599],[18.379452,45.075188],[18.375379,45.053215],[18.373913,45.047035],[18.373424,45.042915],[18.373098,45.038280],[18.372121,45.034161],[18.370981,45.030899],[18.370818,45.027466],[18.369677,45.021286],[18.369189,45.017166],[18.367396,45.009441],[18.366092,45.001545],[18.365604,44.997597],[18.364790,44.993992],[18.369187,44.988027],[18.373098,44.982662],[18.376357,44.977169],[18.381244,44.970989],[18.386619,44.963093],[18.401117,44.943008],[18.403723,44.938717],[18.407632,44.933739],[18.409749,44.929790],[18.411867,44.926701],[18.413984,44.921894],[18.418707,44.911423],[18.426036,44.888034],[18.427624,44.883785],[18.428520,44.880095],[18.436703,44.862671],[18.444439,44.849753],[18.445416,44.848294],[18.434749,44.816923],[18.427503,44.794693],[18.452908,44.533768],[18.466585,44.502869],[18.491169,44.498749],[18.492635,44.446735],[18.478470,44.423561],[18.392320,44.402790],[18.352243,44.400043],[18.266030,44.324512],[18.238641,44.265289],[18.221684,44.250183],[18.207171,44.264088],[18.190537,44.264088],[18.182546,44.250355],[18.209780,44.234047],[18.233587,44.152851],[18.229184,44.078522],[18.247771,44.060841],[18.284286,44.064789],[18.310364,44.053802],[18.328616,44.063244],[18.367395,43.956299],[18.387433,43.930378],[18.412029,43.934498],[18.427827,43.937416],[18.441182,43.938961],[18.441344,43.933125],[18.438413,43.929691],[18.444276,43.918362],[18.440530,43.914070],[18.435156,43.910980],[18.426199,43.910465],[18.424733,43.906345],[18.419684,43.906002],[18.420498,43.904457],[18.422616,43.901367],[18.421639,43.898792],[18.417567,43.899136],[18.417241,43.896904],[18.417567,43.892956],[18.413658,43.891926],[18.404699,43.893299],[18.392646,43.889351],[18.385315,43.884544],[18.376029,43.884716],[18.366255,43.881454],[18.364462,43.879566],[18.353220,43.860683],[18.344422,43.857765],[18.332690,43.855019],[18.326334,43.850727],[18.316883,43.844891],[18.308571,43.844547],[18.298303,43.852444],[18.288524,43.854675],[18.283471,43.851414],[18.277277,43.848495],[18.275484,43.848667],[18.272061,43.845577],[18.267497,43.841629],[18.263910,43.838711],[18.259835,43.834763],[18.260487,43.829784],[18.256411,43.826523],[18.249564,43.820343],[18.251115,43.785925],[18.254865,43.779659],[18.255028,43.772621],[18.257391,43.769875],[18.257636,43.764381],[18.252338,43.756742],[18.250870,43.749189],[18.245490,43.741894],[18.231469,43.734941],[18.228045,43.736401],[18.226333,43.740950],[18.226414,43.749704],[18.223887,43.753910],[18.212636,43.763866],[18.197226,43.774166],[18.189154,43.776484],[18.182467,43.775454],[18.178308,43.773909],[18.167380,43.767128],[18.138673,43.741293],[18.129211,43.741078],[18.121992,43.744512],[18.106655,43.759232],[18.088624,43.792276],[18.084830,43.809443],[18.045458,43.873301],[18.012280,43.914714],[18.000733,43.923855],[17.975426,43.924928],[17.959219,43.910422],[17.956198,43.909564],[17.951462,43.906345],[17.933130,43.885617],[17.925986,43.881969]
        ],
        BGH: [
            [17.559753,43.634005],[17.562290,43.639112],[17.569737,43.647351],[17.575833,43.651171],[17.584132,43.652458],[17.605241,43.648682],[17.620948,43.646793],[17.628638,43.647480],[17.631256,43.649712],[17.629783,43.655376],[17.624711,43.662758],[17.612768,43.668079],[17.597714,43.670826],[17.580532,43.675804],[17.530777,43.706703],[17.523738,43.724384],[17.515880,43.738976],[17.517845,43.758202],[17.518827,43.763695],[17.516044,43.772106],[17.515553,43.784466],[17.521282,43.787556],[17.530286,43.787727],[17.535196,43.792362],[17.539452,43.806953],[17.554183,43.828239],[17.564657,43.834763],[17.575950,43.844547],[17.580204,43.849869],[17.587241,43.853817],[17.603768,43.859825],[17.643688,43.862743],[17.660047,43.858967],[17.679347,43.847294],[17.695702,43.846436],[17.719578,43.851929],[17.731678,43.850384],[17.742306,43.846264],[17.749663,43.841114],[17.756857,43.842144],[17.761761,43.849869],[17.771570,43.872871],[17.777945,43.878708],[17.785955,43.876820],[17.809491,43.871326],[17.822893,43.867378],[17.829593,43.860683],[17.837437,43.857765],[17.851000,43.864117],[17.906057,43.875961],[17.925331,43.882141],[17.933171,43.885660],[17.951381,43.906260],[17.956198,43.909521],[17.959138,43.910379],[17.969426,43.920250],[17.975386,43.924885],[18.000775,43.923855],[18.012284,43.914671],[18.024528,43.900423],[18.045665,43.873043],[18.068025,43.838625],[18.084835,43.809357],[18.088588,43.792362],[18.106700,43.759232],[18.122037,43.744469],[18.129215,43.741035],[18.138677,43.741207],[18.154174,43.754597],[18.167386,43.766956],[18.178314,43.773994],[18.177662,43.768501],[18.178151,43.756657],[18.170811,43.751507],[18.164613,43.739491],[18.153522,43.727646],[18.140798,43.719234],[18.124810,43.716488],[18.116816,43.718891],[18.111758,43.713913],[18.101968,43.711853],[18.096910,43.705673],[18.089240,43.702240],[18.075696,43.689709],[18.063293,43.684387],[18.055788,43.684387],[18.038487,43.692627],[18.026735,43.702927],[18.021184,43.708763],[18.017266,43.708420],[18.014655,43.703613],[18.002247,43.695030],[17.991798,43.689194],[17.980695,43.676834],[17.966653,43.667908],[17.958488,43.667908],[17.949996,43.658638],[17.939544,43.667564],[17.925498,43.652802],[17.918638,43.640442],[17.911451,43.632545],[17.910471,43.622246],[17.902630,43.618126],[17.899036,43.612633],[17.889235,43.617096],[17.879513,43.622932],[17.870119,43.628340],[17.869547,43.632374],[17.866525,43.634176],[17.865789,43.637180],[17.862767,43.636150],[17.858682,43.642159],[17.858927,43.645592],[17.856395,43.646536],[17.856313,43.648252],[17.855578,43.650398],[17.856966,43.653059],[17.858028,43.657608],[17.856558,43.657436],[17.854107,43.656492],[17.853453,43.655291],[17.853944,43.654089],[17.853617,43.652630],[17.851329,43.652201],[17.849123,43.650570],[17.846427,43.650141],[17.844139,43.651514],[17.842751,43.653746],[17.840790,43.653316],[17.837276,43.651342],[17.832782,43.650656],[17.829187,43.649712],[17.828370,43.650999],[17.826164,43.650913],[17.826246,43.653059],[17.825102,43.653574],[17.822323,43.652887],[17.821670,43.654432],[17.820689,43.654175],[17.819545,43.651171],[17.818891,43.648939],[17.816603,43.647051],[17.813171,43.649368],[17.813825,43.652716],[17.812436,43.652458],[17.810638,43.654776],[17.808595,43.653316],[17.809167,43.651772],[17.808350,43.649025],[17.804591,43.649540],[17.802221,43.652458],[17.802875,43.654261],[17.800913,43.654175],[17.800178,43.652973],[17.797971,43.651686],[17.795846,43.653231],[17.796418,43.655119],[17.795765,43.656235],[17.791597,43.656063],[17.791597,43.653574],[17.787592,43.656836],[17.783342,43.655977],[17.782606,43.659153],[17.782034,43.659067],[17.780808,43.657265],[17.780400,43.653574],[17.779255,43.653316],[17.778765,43.655806],[17.776476,43.656492],[17.777049,43.652287],[17.775741,43.651686],[17.774024,43.655977],[17.772798,43.657522],[17.774760,43.661556],[17.769447,43.660355],[17.770428,43.658638],[17.768793,43.657007],[17.766178,43.656063],[17.763153,43.658638],[17.762581,43.661642],[17.766831,43.662157],[17.765769,43.664904],[17.762254,43.664989],[17.762990,43.667307],[17.764625,43.672371],[17.768221,43.675375],[17.766750,43.677950],[17.762744,43.674345],[17.761927,43.672199],[17.759475,43.672113],[17.759557,43.674002],[17.756941,43.672800],[17.756696,43.675289],[17.757431,43.677692],[17.757023,43.678808],[17.753099,43.678293],[17.751382,43.678894],[17.753181,43.680353],[17.754407,43.681297],[17.754243,43.683529],[17.754815,43.684988],[17.753099,43.685417],[17.750074,43.683872],[17.750238,43.685846],[17.749666,43.687391],[17.747131,43.685760],[17.748112,43.689623],[17.749993,43.691511],[17.747213,43.693657],[17.745496,43.696060],[17.739283,43.697176],[17.740837,43.699408],[17.741899,43.702755],[17.743371,43.705072],[17.744515,43.705587],[17.743453,43.707905],[17.740183,43.707047],[17.741245,43.704386],[17.740183,43.703270],[17.737567,43.707476],[17.734297,43.710737],[17.731353,43.711338],[17.730536,43.707819],[17.727756,43.707132],[17.725303,43.710566],[17.725876,43.715458],[17.724486,43.717432],[17.721134,43.717346],[17.710096,43.715372],[17.706010,43.715458],[17.705847,43.712368],[17.702740,43.712025],[17.704048,43.710308],[17.699632,43.707733],[17.703067,43.708420],[17.700287,43.704300],[17.697179,43.703442],[17.694399,43.701725],[17.692436,43.704472],[17.691128,43.703270],[17.691619,43.699837],[17.688511,43.697605],[17.690474,43.694687],[17.687530,43.691425],[17.689493,43.686962],[17.686549,43.686104],[17.684259,43.688507],[17.681806,43.685417],[17.680824,43.681812],[17.671992,43.679409],[17.664795,43.681812],[17.662828,43.677006],[17.664627,43.674431],[17.662664,43.666706],[17.667244,43.670654],[17.670025,43.667221],[17.666099,43.662415],[17.667081,43.657780],[17.664954,43.651085],[17.659393,43.644562],[17.661683,43.640957],[17.659883,43.639755],[17.662173,43.635807],[17.660701,43.634090],[17.659393,43.635635],[17.655630,43.633404],[17.660701,43.630142],[17.660211,43.628254],[17.655630,43.628597],[17.654158,43.621559],[17.658084,43.621044],[17.660865,43.617954],[17.657266,43.616581],[17.653504,43.613834],[17.650069,43.613491],[17.641890,43.615036],[17.602296,43.627052],[17.578569,43.628426]
        ],
        YGH: [
            [18.506957,45.527344],[18.454857,45.380402],[18.437921,45.374908],[18.439224,45.311737],[18.431407,45.277405],[18.460068,45.241699],[18.457463,45.229340],[18.396226,45.173035],[18.364948,44.994507],[18.411863,44.927216],[18.445738,44.848938],[18.427499,44.795380],[18.453555,44.533081],[18.466581,44.502869],[18.491329,44.498749],[18.492631,44.446564],[18.478304,44.423218],[18.392317,44.402618],[18.351914,44.399872],[18.265863,44.324341],[18.238475,44.265289],[18.221518,44.250183],[18.207168,44.263916],[18.190208,44.263916],[18.182380,44.250183],[18.209777,44.233704],[18.233257,44.152679],[18.229344,44.078522],[18.247605,44.060669],[18.284120,44.064789],[18.310198,44.053802],[18.328450,44.063416],[18.367555,43.956299],[18.387104,43.930206],[18.411863,43.934326],[18.402742,43.943939],[18.420984,43.963165],[18.428801,43.985138],[18.444435,44.004364],[18.477002,43.916473],[18.501748,43.946686],[18.519979,43.948059],[18.548625,43.956299],[18.553833,43.996124],[18.572059,44.002991],[18.588982,43.997498],[18.585077,43.981018],[18.604601,43.974152],[18.624123,43.990631],[18.647547,43.986511],[18.676171,44.016724],[18.749012,44.086761],[18.752913,44.122467],[18.765917,44.137573],[18.807522,44.090881],[18.816621,44.064789],[18.830920,44.090881],[18.858214,44.099121],[18.862112,44.129333],[18.899796,44.141693],[18.890701,44.195251],[18.923181,44.228210],[18.954356,44.313354],[18.940068,44.320221],[18.933573,44.376526],[19.090673,44.365540],[19.111436,44.400558],[19.143225,44.410858],[19.185384,44.421844],[19.189924,44.434204],[19.204190,44.440384],[19.199651,44.452744],[19.191869,44.460983],[19.173710,44.463043],[19.165279,44.471283],[19.202893,44.480896],[19.211323,44.489136],[19.224291,44.468536],[19.232719,44.448624],[19.240499,44.452744],[19.262213,44.445877],[19.283927,44.467163],[19.292028,44.468536],[19.297537,44.477119],[19.304018,44.473686],[19.307582,44.474716],[19.310174,44.480209],[19.316006,44.477463],[19.318274,44.453773],[19.319570,44.434547],[19.316654,44.425278],[19.313414,44.420128],[19.317626,44.413605],[19.317626,44.388542],[19.320866,44.386826],[19.333501,44.395752],[19.354558,44.395409],[19.362332,44.390945],[19.365895,44.386482],[19.375936,44.389572],[19.391157,44.383049],[19.406054,44.384422],[19.418683,44.390945],[19.419978,44.553680],[19.449120,45.089264],[19.209377,45.119476],[19.305317,45.362549],[19.305317,45.405807],[19.296244,45.406494],[19.316976,46.537228],[19.080329,46.540747],[18.914751,46.347188],[18.513754,45.541377]
        ],
        HGH: [
            [17.583055,43.851457],[17.582523,43.852959],[17.582994,43.856542],[17.582666,43.865082],[17.583300,43.866305],[17.594100,43.877399],[17.599398,43.879094],[17.600482,43.880167],[17.602262,43.883085],[17.608846,43.897934],[17.609992,43.900938],[17.619563,43.914499],[17.633061,43.927031],[17.640750,43.932610],[17.645657,43.938446],[17.650810,43.951578],[17.655145,43.962994],[17.664796,43.977242],[17.672157,43.990459],[17.675183,43.994751],[17.694318,44.006424],[17.695954,44.008312],[17.697098,44.010544],[17.700206,44.010973],[17.704049,44.013462],[17.713452,44.024448],[17.718521,44.033289],[17.722200,44.039555],[17.725470,44.042988],[17.732747,44.048052],[17.735608,44.052343],[17.736426,44.059296],[17.740758,44.071913],[17.743538,44.083500],[17.743620,44.087877],[17.745745,44.104013],[17.748361,44.113111],[17.748770,44.125128],[17.747625,44.130707],[17.744437,44.136801],[17.740840,44.140749],[17.737488,44.145298],[17.732420,44.148560],[17.722854,44.159031],[17.721873,44.162550],[17.721955,44.165640],[17.718030,44.172506],[17.711326,44.178686],[17.706175,44.181604],[17.703231,44.195766],[17.698325,44.213276],[17.694400,44.222975],[17.704376,44.223404],[17.739287,44.241686],[17.771412,44.252501],[17.779667,44.253788],[17.797239,44.264517],[17.804512,44.270868],[17.811949,44.290953],[17.822572,44.306660],[17.830988,44.312067],[17.858604,44.315844],[17.860483,44.305201],[17.861953,44.270096],[17.858604,44.226065],[17.865385,44.210787],[17.897242,44.179459],[17.897814,44.158001],[17.896589,44.092169],[17.894628,44.069681],[17.880252,44.039555],[17.907452,43.991661],[17.906553,43.976898],[17.899937,43.957586],[17.901081,43.944283],[17.908105,43.918362],[17.926072,43.882313],[17.907207,43.876219],[17.851333,43.864202],[17.837525,43.857765],[17.829681,43.860683],[17.822981,43.867464],[17.778033,43.878708],[17.771739,43.872957],[17.761931,43.849869],[17.756863,43.842144],[17.749587,43.841114],[17.742312,43.846264],[17.731684,43.850470],[17.719911,43.851929],[17.695708,43.846350],[17.679435,43.847294],[17.660134,43.859053],[17.643367,43.862829],[17.603774,43.859911],[17.587083,43.853817]
        ]
    };

    /* ============================================================
       ZONE COLORS
       ============================================================ */
    const zoneColors = {
        SGH: '#4A90E2', KGH: '#5BA3F5', NNGH: '#357ABD', WNH: '#6BB6FF',
        MCH: '#2E5C8A', KKH: '#7FC8F8', TGH: '#1E6BA8', BGH: '#8CC8FF',
        YGH: '#2563A5', HGH: '#4A9EFF'
    };

    /* ============================================================
       PHC MARKERS (exact GPS)
       ============================================================ */
    const phcMarkers = [
        { name: 'Security Forces PHCC', lat: 17.4802, lng: 47.1308, zone: 'SGH' },
        { name: 'Rawdah PHCC', lat: 17.5102, lng: 47.1021, zone: 'SGH' },
        { name: 'Aziziyah PHCC', lat: 17.4964, lng: 47.1125, zone: 'SGH' },
        { name: 'Alwadia PHCC', lat: 17.0560, lng: 47.0949, zone: 'SGH' },
        { name: 'Sultanaa PHCC', lat: 17.4810, lng: 47.1181, zone: 'SGH' },
        { name: 'Tamani PHCC', lat: 17.4850, lng: 47.1150, zone: 'SGH' },
        { name: 'Alakashim HC', lat: 17.7213, lng: 47.2143, zone: 'SGH' },
        { name: 'Khaldiya Sharoora', lat: 17.4959, lng: 47.1209, zone: 'SGH' },
        { name: 'Taslal HC', lat: 17.6314, lng: 44.4719, zone: 'KGH' },
        { name: 'Mishaliya', lat: 17.7596, lng: 44.4616, zone: 'KGH' },
        { name: 'Junoob Matar', lat: 17.5940, lng: 44.4493, zone: 'KGH' },
        { name: 'Goilla PHCC', lat: 17.6016, lng: 44.5250, zone: 'KGH' },
        { name: 'Al-Sharaa', lat: 17.5310, lng: 44.5651, zone: 'KGH' },
        { name: 'Khubash HC', lat: 17.5544, lng: 44.7051, zone: 'KGH' },
        { name: 'Shurfa PHCC', lat: 17.5144, lng: 44.2953, zone: 'NNGH' },
        { name: 'Alhamar PHCC', lat: 17.4699, lng: 44.1819, zone: 'NNGH' },
        { name: 'Barrk PHCC', lat: 17.5619, lng: 44.3346, zone: 'NNGH' },
        { name: 'Hussainiah PHCC', lat: 17.8119, lng: 44.4469, zone: 'NNGH' },
        { name: 'Al Arisa HC', lat: 17.5625, lng: 44.3085, zone: 'NNGH' },
        { name: 'Rijla PHCC', lat: 17.4974, lng: 44.2134, zone: 'NNGH' },
        { name: 'Wadi Riman HC', lat: 17.5455, lng: 44.3863, zone: 'NNGH' },
        { name: 'Albalad', lat: 17.4942, lng: 44.1315, zone: 'WNH' },
        { name: 'Aljurbah HC', lat: 17.4711, lng: 44.1502, zone: 'WNH' },
        { name: 'Abasoud PHCC', lat: 17.4845, lng: 44.1284, zone: 'WNH' },
        { name: 'Al Mufja HC', lat: 17.4386, lng: 44.0529, zone: 'WNH' },
        { name: 'Alhadan PHCC', lat: 17.4583, lng: 44.1260, zone: 'WNH' },
        { name: 'Al Safa HC', lat: 17.4634, lng: 44.0776, zone: 'WNH' },
        { name: 'Algabil HC', lat: 17.4900, lng: 44.1917, zone: 'WNH' },
        { name: 'Dahada HC', lat: 17.5170, lng: 44.1604, zone: 'WNH' },
        { name: 'Al Muratah PHCC', lat: 17.4898, lng: 44.1026, zone: 'WNH' },
        { name: 'Shab Reer PHCC', lat: 17.4642, lng: 44.1624, zone: 'WNH' },
        { name: 'Shebhan PHCC', lat: 17.4842, lng: 44.1215, zone: 'WNH' },
        { name: 'Nhogah PHCC', lat: 17.4463, lng: 44.1036, zone: 'WNH' },
        { name: 'Atheabah PHCC', lat: 17.5550, lng: 44.2523, zone: 'MCH' },
        { name: 'Al Fahad Janubi', lat: 17.5681, lng: 44.2225, zone: 'MCH' },
        { name: 'Khaldiya PHCC', lat: 17.5433, lng: 44.2310, zone: 'KKH' },
        { name: 'North Fahad PHCC', lat: 17.5753, lng: 44.2302, zone: 'KKH' },
        { name: 'Aldubat PHCC', lat: 17.5317, lng: 44.2047, zone: 'KKH' },
        { name: 'Al Faisaliah HC', lat: 17.5243, lng: 44.1886, zone: 'KKH' },
        { name: 'Biraskar PHCC', lat: 17.5759, lng: 44.0430, zone: 'KKH' },
        { name: 'Prince Mishal HC', lat: 17.5581, lng: 44.2304, zone: 'KKH' },
        { name: 'Diyafa PHCC', lat: 17.5412, lng: 44.2166, zone: 'KKH' },
        { name: 'Al Contub', lat: 17.5261, lng: 44.2100, zone: 'KKH' },
        { name: 'Aqfah PHCC', lat: 17.4951, lng: 43.7408, zone: 'KKH' },
        { name: 'Al Jaffah PHCC', lat: 17.7733, lng: 43.9160, zone: 'HGH' },
        { name: 'Al Harshar PHCC', lat: 17.6716, lng: 43.8850, zone: 'HGH' },
        { name: 'Almontsher PHCC', lat: 17.8880, lng: 44.1716, zone: 'HGH' },
        { name: 'Habuna PHCC', lat: 17.8505, lng: 44.0197, zone: 'HGH' },
        { name: 'Dekah HC', lat: 17.8547, lng: 44.2716, zone: 'HGH' },
        { name: 'Majma HC', lat: 17.7546, lng: 43.9609, zone: 'HGH' },
        { name: 'Alkhaniq PHCC', lat: 17.7440, lng: 43.7628, zone: 'BGH' },
        { name: 'Al Qarn HC', lat: 17.7529, lng: 43.7180, zone: 'BGH' },
        { name: 'Alrehab PHCC', lat: 18.0072, lng: 43.8992, zone: 'BGH' },
        { name: 'Maleha HC', lat: 17.9922, lng: 43.8200, zone: 'BGH' },
        { name: 'Bader Aljanoob', lat: 17.8789, lng: 43.7160, zone: 'BGH' },
        { name: 'Hadadah HC', lat: 17.6110, lng: 43.7596, zone: 'BGH' },
        { name: 'Wadi Wasat', lat: 18.2982, lng: 44.2024, zone: 'YGH' },
        { name: 'Yadama PHCC', lat: 18.5328, lng: 44.2053, zone: 'YGH' },
        { name: 'Legam PHCC', lat: 18.5993, lng: 44.1801, zone: 'YGH' },
        { name: 'Sultana PHCC', lat: 18.8598, lng: 45.1105, zone: 'YGH' },
        { name: 'Mohammadia PHCC', lat: 18.4441, lng: 44.7958, zone: 'YGH' },
        { name: 'Suffah PHCC', lat: 18.1824, lng: 44.3363, zone: 'TGH' },
        { name: 'Thar PHCC', lat: 17.9768, lng: 44.1063, zone: 'TGH' },
        { name: 'Hema PHCC', lat: 18.2093, lng: 44.4841, zone: 'TGH' },
        { name: 'Talham PHCC', lat: 18.2771, lng: 43.9955, zone: 'TGH' },
        { name: 'Qattan PHCC', lat: 18.1353, lng: 44.1273, zone: 'TGH' },
        { name: 'Tilah PHCC', lat: 18.0529, lng: 43.9802, zone: 'TGH' },
        { name: 'Naiwan PHCC', lat: 18.2949, lng: 43.8769, zone: 'TGH' }
    ];

    /* ============================================================
       INITIALIZE MAP
       ============================================================ */
    const map = L.map('map', {
        zoomControl: true,
        attributionControl: false
    });

    // Clean light tile layer
    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
        maxZoom: 14,
        minZoom: 6
    }).addTo(map);

    /* ============================================================
       DRAW ZONE POLYGONS
       ============================================================ */
    const polygonLayers = {};
    const allPolygons = [];

    Object.entries(zones).forEach(([zoneId, coords]) => {
        const color = zoneColors[zoneId] || '#4A90E2';
        const poly = L.polygon(coords, {
            fillColor: color,
            fillOpacity: 0.35,
            weight: 2,
            color: color,
            opacity: 0.8
        }).addTo(map);

        // Zone label at centroid
        const center = poly.getBounds().getCenter();
        poly.bindTooltip(zoneId, {
            permanent: true,
            direction: 'center',
            className: 'zone-label'
        });

        // Click → tell parent to navigate
        poly.on('click', function () {
            // Highlight this zone
            Object.values(polygonLayers).forEach(p => {
                p.setStyle({ fillOpacity: 0.2, weight: 1 });
            });
            poly.setStyle({ fillOpacity: 0.55, weight: 3 });

            // Zoom to zone
            map.fitBounds(poly.getBounds(), { padding: [40, 40] });

            // Notify parent (glass.html)
            if (window.parent && window.parent !== window) {
                window.parent.postMessage({ type: 'zoneClick', zone: zoneId }, '*');
            }
        });

        polygonLayers[zoneId] = poly;
        allPolygons.push(poly);
    });

    // Fit all zones
    const group = new L.featureGroup(allPolygons);
    map.fitBounds(group.getBounds(), { padding: [30, 30] });

    /* ============================================================
       DRAW PHC MARKERS
       ============================================================ */
    phcMarkers.forEach(phc => {
        const color = zoneColors[phc.zone] || '#4A90E2';
        const icon = L.divIcon({
            className: '',
            html: `<div class="phc-dot" style="width:7px;height:7px;background:${color}"></div>`,
            iconSize: [7, 7],
            iconAnchor: [3.5, 3.5]
        });
        L.marker([phc.lat, phc.lng], { icon: icon })
            .bindTooltip(phc.name, { direction: 'top', offset: [0, -5] })
            .addTo(map);
    });

    /* ============================================================
       CLICK OUTSIDE ZONES → RESET VIEW
       ============================================================ */
    map.on('click', function () {
        // Reset all polygon styles
        Object.values(polygonLayers).forEach(p => {
            p.setStyle({ fillOpacity: 0.35, weight: 2 });
        });
        // Zoom back to full view
        map.fitBounds(group.getBounds(), { padding: [30, 30] });

        if (window.parent && window.parent !== window) {
            window.parent.postMessage({ type: 'zoneClick', zone: null }, '*');
        }
    });

    /* ============================================================
       LISTEN FOR MESSAGES FROM PARENT
       ============================================================ */
    window.addEventListener('message', function (e) {
        if (!e.data || e.data.type !== 'focusZone') return;
        const zoneId = e.data.zone;
        if (zoneId && polygonLayers[zoneId]) {
            Object.values(polygonLayers).forEach(p => {
                p.setStyle({ fillOpacity: 0.2, weight: 1 });
            });
            polygonLayers[zoneId].setStyle({ fillOpacity: 0.55, weight: 3 });
            map.fitBounds(polygonLayers[zoneId].getBounds(), { padding: [40, 40] });
        } else {
            Object.values(polygonLayers).forEach(p => {
                p.setStyle({ fillOpacity: 0.35, weight: 2 });
            });
            map.fitBounds(group.getBounds(), { padding: [30, 30] });
        }
    });

})();
</script>
</body>
</html>
